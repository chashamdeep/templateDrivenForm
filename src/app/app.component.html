<div class="container">
  <h2>User Form</h2> 
  <form #userForm ="ngForm"> <!-- #userForm is the reference variable -->
    <div class="form-group">
      <label>Name:</label>
      <input type="text" #nameRef="ngModel" minlength="4" class="form-control" name="name" ngModel required/>
      <div *ngIf="nameRef.errors && (nameRef.dirty || nameRef.touched)"class="alert alert-danger">
        <div [hidden]="!nameRef.errors.required">
            Please enter your name. 
        </div>
        <div [hidden]="!nameRef.errors.minlength">
          please enter atleast 4 characters.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label>Email:</label>
      <input type="email" #emailRef="ngModel" class="form-control" name="email"  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" ngModel required/>
      <div *ngIf="emailRef.errors && (emailRef.dirty || emailRef.touched)" class="alert alert-danger">
        <div [hidden]="!emailRef.errors.pattern">
          Plese enter a valid email.
        </div> 
        <div [hidden]="!emailRef.errors.required">
          please enter your email.
        </div>
      </div> 
    </div>
    <div ngModelGroup="address">
      <div class="form-group">
        <label>Street:</label>
        <input type="text" #streetRef="ngModel" class="form-control" name="street" ngModel required/>
        <div [hidden]="streetRef.valid || streetRef.pristine" class="alert alert-danger">
          Plese enter your street.
        </div>
      </div>
      <div class="form-group">
        <label>City:</label>
        <input type="text" #cityRef="ngModel" class="form-control" name="city" ngModel required/>
        <div [hidden]="cityRef.valid || cityRef.pristine" class="alert alert-danger">
          Plese enter your city.
        </div>
      </div>  
    </div>
    <button [disabled]="!userForm.form.valid" type="submit" class="btn btn-primary" (click)="userData(userForm.value)">Submit</button>
  </form> 
</div>

<app-generate-data [parentData]="userForm.value"></app-generate-data>